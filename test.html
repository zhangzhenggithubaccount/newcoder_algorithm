<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        function RandomListNode(x){
            this.label = x;
            this.next = null;
            this.random = null;
        }
        function print(root) {
            let ret = [];
            while(root) {
                if(root.random){
                    ret.push([root.label, root.random.label]);
                }else {
                    ret.push([root.label, null]);
                }
                root = root.next;
            }
            console.log(ret);
        }
        function Clone(pHead) {
            if(!pHead){
                return null;
            }
            var head = new RandomListNode(pHead.label);
            head.random = pHead.random;
            head.next = Clone(pHead.next);
            return head;
        }
        
        let p1 = new RandomListNode(1);
        let p2 = new RandomListNode(2);
        let p3 = new RandomListNode(3);
        let root = new RandomListNode(0);
        root.next = p1;
        root.random = root;
        p1.next = p2;
        p1.random = root;
        p2.next = p3;
        p3.random = root;

        let res = Clone(root);
        print(res)

        console.log(res.random === root.random);
    </script>

</body>
</html>